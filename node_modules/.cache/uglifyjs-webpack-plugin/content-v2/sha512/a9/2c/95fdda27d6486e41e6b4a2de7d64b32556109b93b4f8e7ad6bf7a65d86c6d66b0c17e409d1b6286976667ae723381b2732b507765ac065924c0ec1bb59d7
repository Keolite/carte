{"code":"!function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=2)}([,function(t,e,r){},function(t,e,r){\"use strict\";var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}();r(1);new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.map=\"\",this.localCoordonates={lat:null,lgt:null},this.allMarkers=[[46.9025918,5.7722434],[47.1,5.5]],this.layerAllMarkers=\"\",this.dir=\"\",this.layerDir=\"\",this.defineMap()}return o(t,[{key:\"setLocalCoordonate\",value:function(){var t=this;\"geolocation\"in navigator?navigator.geolocation.getCurrentPosition(function(e){t.localCoordonates.lat=e.coords.latitude,t.localCoordonates.lgt=e.coords.longitude}):(this.localCoordonates.lat=46.7454643,this.localCoordonates.lgt=5.9081772)}},{key:\"defineMap\",value:function(){var t=this;this.setLocalCoordonate(),setTimeout(function(){return t.drawMap()},2e3)}},{key:\"drawMap\",value:function(){this.map=L.map(\"map\",{layers:MQ.mapLayer(),center:[this.localCoordonates.lat,this.localCoordonates.lgt],zoom:15}),this.layerAllMarkers=L.layerGroup().addTo(this.map),this.addAllMarkers(this.allMarkers),this.drawRouting({lat:this.localCoordonates.lat,lng:this.localCoordonates.lgt},{lat:this.allMarkers[0][0],lng:this.allMarkers[0][1]})}},{key:\"addAllMarkers\",value:function(t){var e=!0,r=!1,o=void 0;try{for(var n,a=t[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var l=n.value;this.addOneMarker(l[0],l[1])}}catch(t){r=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw o}}}},{key:\"addOneMarker\",value:function(t,e){var r=this;L.marker([t,e],{draggable:!1}).bindPopup(\"Vous voulez aller ici\").on(\"click\",function(t){r.map.removeLayer(r.layerDir),console.log(t.latlng),r.drawRouting({lat:r.localCoordonates.lat,lng:r.localCoordonates.lgt},t.latlng)}).addTo(this.layerAllMarkers)}},{key:\"drawRouting\",value:function(t,e){this.dir=MQ.routing.directions().on(\"success\",function(t){var e,r,o=t.route.legs,n=\"\";if(o&&o.length){for(e=o[0].maneuvers,r=0;r<e.length;r++)n+=r+1+\". \",n+=e[r].narrative+\"<br/>\";L.DomUtil.get(\"route-narrative\").innerHTML=n}}),this.dir.route({locations:[{latLng:t},{latLng:e}]}),this.layerDir=MQ.routing.routeLayer({directions:this.dir,fitBounds:!0}),this.map.addLayer(this.layerDir)}}]),t}())}]);","extractedComments":[]}